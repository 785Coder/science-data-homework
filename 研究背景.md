# 电影演员推荐系统：研究背景

## 1. 现实动因
- 影视内容规模持续增长，选角决策复杂化，人工经验难以覆盖长尾演员与跨题材匹配。
- 制片方与导演需要在限定时间与预算内完成演员筛选与备选组合，亟需可复用、可解释且可扩展的技术工具。
- 面向产业实践的推荐系统应同时关注可解释性（为何推荐某演员）、可扩展性（随数据规模增长稳定运行）与可复现性（结果可核验）。

## 2. 学术基础
- 图推荐：以演员共现构成无向图，利用邻接、路径与社区结构进行相似性与关联度评估，兼具结构化可解释性。
- 社区发现：Louvain 等模块度最大化方法用于挖掘稳定群组，为同类型、同班底或合作紧密的演员群提供依据。
- 向量化与近似最近邻（ANN）：将影片文本与演员列表编码为特征向量，通过 `IVFFlat` 或 `HNSW` 等索引实现高效检索，覆盖图结构难以捕捉的语义线索。

## 3. 数据与构建
- 数据源：示例数据 `demo-data.json` 包含影片信息与 `main_actors` 字段，便于快速演示与扩展。
- 图存储：本地 SQLite 文件 `graph.sqlite` 维护两类表：`nodes(id, name)`（演员节点）与 `edges(src, dst)`（无向共现边）。
- 构建流程：
  - `main.py` 作为入口，组织数据加载与写库流程。
  - `graph_builder.py` 解析影片主创，基于共现关系生成节点与边并写入 SQLite。

## 4. 方法概述
- 图基础推荐：
  - 邻居与度数驱动的候选生成，利用共现强度与相邻结构进行初筛（`viz.py`、`rec.py` 负责加载与处理）。
  - 社区加持：对子图进行社区检测（`rec_view.py`、`rec.py`），群组着色与分簇有助于解释推荐来源与拓展候选集合。
- 语义向量检索：
  - 文本与演员名联合编码为稀疏/哈希向量（`rec.py`），以 FAISS/HNSWLIB 索引实现 ANN 搜索。
  - 以图邻居作“真值”或弱监督参照，评估语义检索与图结构的一致性。
- 可视化与分析：
  - `viz.py` 对不同视角子图（`topk/ego/full`）进行渲染，`rec_view.py` 提供社区视图与可解释的色彩分组。

## 5. 研究问题
- 图结构与语义检索的互补性：在不同规模与稀疏度下，哪类方法更稳健？何时互助提升效果？
- 社区结构对推荐质量的影响：社区成员是否提升候选的相关性与多样性？如何量化其贡献？
- 可扩展性与性能：随图规模增长（如 100、500、1000、10000 节点/边量级），推荐质量与检索延迟的变化规律如何？
- 可解释性与可视化：如何将邻居、路径与社区证据转化为人类可读的解释，以支持选角决策？

## 6. 评测设定
- 指标体系：以精度（Precision）、召回（Recall）、F1 综合评价候选质量，结合检索耗时与内存占用评估系统效率。
- 参照与真值：采用图邻居与高频共现作为弱监督参照，验证 ANN 与图驱动方法的一致性与互补性。
- 规模化实验：通过脚本参数设置不同规模（如 `--sizes 100,500,1000,10000`），生成基准输出（示例：`bench_both_100.csv`），观察质量-性能权衡。

## 7. 预期贡献
- 提供一套轻量、可复现的演员推荐管线：本地 SQLite 图存储、`networkx` 分析与 ANN 检索相结合。
- 兼顾可解释性与性能：图邻域与社区证据支撑推荐解释，ANN 保证大规模语义检索的效率。
- 直观的可视化工具：社区视图与子图渲染帮助非技术用户理解推荐逻辑并进行人工审阅。

## 8. 风险与挑战
- 数据稀疏与冷启动：长尾演员与新影片共现不足，需引入更多语义特征或跨域信号。
- 名称规范化与歧义消解：演员别名、重名问题影响节点正确性，需设计稳健的实体对齐策略。
- 偏差与公平性：历史共现存在产业偏差，推荐可能强化既有结构，应在评测中纳入多样性与公平性考量。

## 9. 可复现实验与工具
- 主要脚本与职责：
  - `main.py`：流程入口，数据加载与图写入。
  - `graph_builder.py`：构图与持久化。
  - `viz.py`：子图绘制与布局。
  - `rec_view.py`：社区检测与分组可视化。
  - `rec.py`：向量化、ANN 检索与评测。
- 技术栈：`networkx`、`sqlite3`、`numpy`、`scikit-learn`、`faiss/hnswlib`、`matplotlib`。

> 本研究背景依据现有代码结构与数据设定总结，后续可在数据源扩充、特征工程与评测维度上进一步强化，以贴近真实选角场景。